// Code generated by Diarkis Puffer module: DO NOT EDIT.
//
// Auto-generated by Diarkis Puffer v0.1.0
//
// - Maximum length of a string is 65535 bytes
// - Maximum length of a byte array is 65535 bytes
// - Maximum length of any array is 65535 elements

//lint:file-ignore SA4024 Ignore all code, it's generated.

package generated

import (
	"encoding/binary"
	"errors"
	"fmt"
	"strings"
)

// CastId represents the command protocol data structure.
type CastId struct {
	Fid     []byte
	Ts_hash []byte
}

// NewCastId creates a new instance of CastId struct.
func NewCastId() *CastId {
	return &CastId{}
}

// Pack encodes CastId struct to a byte array to be delivered over the command.
func (proto *CastId) Pack() []byte {
	bytes := make([]byte, 0, proto.PackedSize())
	bytes = binary.BigEndian.AppendUint16(bytes, uint16(len(proto.Fid)))
	bytes = append(bytes, proto.Fid...)
	bytes = binary.BigEndian.AppendUint16(bytes, uint16(len(proto.Ts_hash)))
	bytes = append(bytes, proto.Ts_hash...)
	return bytes
}

// Unpack decodes the command payload byte array to CastId struct.
func (proto *CastId) Unpack(bytes []byte) error {
	unpackErr := errors.New("CastIdUnpackError")
	if len(bytes) < 4 {
		return unpackErr
	}
	offset := 0
	if offset+2 > len(bytes) {
		return fmt.Errorf("payload too short to unpack Fid: %w", unpackErr)
	}
	fidSize := int(binary.BigEndian.Uint16(bytes[offset : offset+2]))
	if fidSize+offset+2 > len(bytes) {
		return fmt.Errorf("payload too short to unpack Fid: %w", unpackErr)
	}
	offset += 2
	proto.Fid = make([]byte, fidSize)
	copy(proto.Fid, bytes[offset:offset+fidSize:offset+fidSize])
	offset += fidSize
	if offset+2 > len(bytes) {
		return fmt.Errorf("payload too short to unpack Ts_hash: %w", unpackErr)
	}
	ts_hashSize := int(binary.BigEndian.Uint16(bytes[offset : offset+2]))
	if ts_hashSize+offset+2 > len(bytes) {
		return fmt.Errorf("payload too short to unpack Ts_hash: %w", unpackErr)
	}
	offset += 2
	proto.Ts_hash = make([]byte, ts_hashSize)
	copy(proto.Ts_hash, bytes[offset:offset+ts_hashSize:offset+ts_hashSize])
	offset += ts_hashSize
	return nil
}

// PackedSize returns the estimated packed size of the struct.
func (proto *CastId) PackedSize() int {
	var packedSize = 0
	packedSize += 2 + len(proto.Fid)
	packedSize += 2 + len(proto.Ts_hash)
	return packedSize
}

func (proto *CastId) String() string {
	var list []string
	list = append(list, fmt.Sprint("Fid = ", proto.Fid))
	list = append(list, fmt.Sprint("Ts_hash = ", proto.Ts_hash))
	return strings.Join(list, " | ")
}
